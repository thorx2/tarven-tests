local areas = {
    -- Area 1
    {
        arr = {
            { 0, 0, 0, 1, 0, 0, 0 },
            { 0, 0, 0, 0, 1, 0, 0 },
            { 0, 0, 0, 0, 0, 1, 0 },
            { 1, 0, 0, 3, 0, 0, 1 },
            { 0, 0, 0, 0, 0, 1, 0 },
            { 0, 0, 0, 0, 0, 0, 0 },
            { 0, 0, 0, 0, 0, 0, 0 } },
    },
    {
        arr = {
            { 0, 0, 0, 1, 0, 0, 0 },
            { 0, 0, 0, 0, 1, 0, 0 },
            { 0, 1, 0, 1, 0, 1, 0 },
            { 1, 0, 0, 3, 0, 0, 1 },
            { 0, 1, 0, 0, 0, 1, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 0, 0, 0, 0, 0, 0 } },
    },
    {
        arr = {
            { 0, 0, 0, 1, 0, 0, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 1, 0, 1, 0, 1, 0 },
            { 1, 0, 1, 3, 1, 0, 1 },
            { 0, 1, 0, 0, 0, 1, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 0, 0, 0, 0, 0, 0 } },
    },
    -- Duplicated here from above to below
    {
        arr = {
            { 0, 0, 0, 1, 0, 0, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 1, 0, 1, 0, 1, 0 },
            { 1, 0, 1, 3, 1, 0, 1 },
            { 0, 1, 0, 0, 0, 1, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 0, 0, 0, 0, 0, 0 } },
    },
    {
        arr = {
            { 0, 0, 0, 0, 0, 0, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 1, 0, 1, 0, 0, 0 },
            { 1, 0, 1, 3, 1, 0, 1 },
            { 0, 1, 0, 0, 0, 0, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 0, 0, 0, 0, 0, 0 } },
    },
    {
        arr = {
            { 0, 0, 0, 0, 0, 0, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 1, 0, 1, 0, 0, 0 },
            { 1, 0, 1, 3, 1, 0, 1 },
            { 0, 1, 0, 1, 0, 0, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 0, 0, 1, 0, 0, 0 } },
    },
    {
        arr = {
            { 0, 0, 0, 0, 0, 0, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 0, 0, 0, 0, 0, 0 },
            { 1, 0, 1, 3, 1, 0, 1 },
            { 0, 0, 0, 1, 0, 0, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 0, 0, 1, 0, 0, 0 } },
    },
    {
        arr = {
            { 0, 0, 0, 1, 0, 0, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 0, 0, 0, 0, 1, 0 },
            { 1, 0, 1, 3, 1, 0, 1 },
            { 0, 0, 0, 1, 0, 1, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 0, 0, 1, 0, 0, 0 } },
    },
    {
        arr = {
            { 0, 0, 0, 1, 0, 0, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 1, 0, 1, 0, 1, 0 },
            { 1, 0, 1, 3, 1, 0, 1 },
            { 0, 1, 0, 1, 0, 1, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 0, 0, 1, 0, 0, 0 } },
    },
    {
        arr = {
            { 0, 0, 0, 1, 0, 0, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 1, 0, 1, 0, 1, 0 },
            { 1, 0, 1, 3, 1, 0, 1 },
            { 0, 1, 0, 0, 0, 1, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 0, 0, 0, 0, 0, 0 } },
    },
    {
        arr = {
            { 0, 0, 0, 0, 0, 0, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 1, 0, 1, 0, 0, 0 },
            { 1, 0, 1, 3, 1, 0, 1 },
            { 0, 1, 0, 1, 0, 0, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 0, 0, 1, 0, 0, 0 } },
    },
    {
        arr = {
            { 0, 0, 0, 0, 0, 0, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 0, 0, 0, 0, 0, 0 },
            { 1, 0, 1, 3, 1, 0, 1 },
            { 0, 0, 0, 1, 0, 0, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 0, 0, 1, 0, 0, 0 } },
    },
    {
        arr = {
            { 0, 0, 0, 1, 0, 0, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 0, 0, 0, 0, 1, 0 },
            { 1, 0, 1, 3, 1, 0, 1 },
            { 0, 0, 0, 1, 0, 1, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 0, 0, 1, 0, 0, 0 } },
    },
    -- Below is full board
    {
        arr = {
            { 0, 0, 0, 1, 0, 0, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 1, 0, 1, 0, 1, 0 },
            { 1, 0, 1, 3, 1, 0, 1 },
            { 0, 1, 0, 1, 0, 1, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 0, 0, 1, 0, 0, 0 } },
    },
    {
        arr = {
            { 0, 0, 0, 1, 0, 0, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 1, 0, 1, 0, 1, 0 },
            { 1, 0, 1, 3, 1, 0, 1 },
            { 0, 1, 0, 0, 0, 1, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 0, 0, 0, 0, 0, 0 } },
    },

    {
        arr = {
            { 0, 0, 0, 0, 0, 0, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 1, 0, 1, 0, 0, 0 },
            { 1, 0, 1, 3, 1, 0, 1 },
            { 0, 1, 0, 0, 0, 0, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 0, 0, 0, 0, 0, 0 } },
    },

    {
        arr = {
            { 0, 0, 0, 0, 0, 0, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 1, 0, 1, 0, 0, 0 },
            { 1, 0, 1, 3, 1, 0, 1 },
            { 0, 1, 0, 1, 0, 0, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 0, 0, 1, 0, 0, 0 } },
    },

    {
        arr = {
            { 0, 0, 0, 0, 0, 0, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 0, 0, 0, 0, 0, 0 },
            { 1, 0, 1, 3, 1, 0, 1 },
            { 0, 0, 0, 1, 0, 0, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 0, 0, 1, 0, 0, 0 } },
    },

    {
        arr = {
            { 0, 0, 0, 0, 0, 0, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 0, 0, 0, 0, 0, 0 },
            { 0, 0, 1, 3, 1, 0, 0 },
            { 0, 0, 0, 1, 0, 0, 0 },
            { 0, 0, 1, 0, 1, 0, 0 },
            { 0, 0, 0, 1, 0, 0, 0 } },
    }
}

-- Create and configure combat objects for each area pattern
local combats = {}
for i, area in ipairs(areas) do
    local combat = createCombatObject()
    setCombatParam(combat, COMBAT_PARAM_TYPE, COMBAT_ICEDAMAGE)
    setCombatParam(combat, COMBAT_PARAM_EFFECT, CONST_ME_ICETORNADO)
    setCombatFormula(combat, COMBAT_FORMULA_LEVELMAGIC, 2, 4, 3, 10)
    combat:setArea(createCombatArea(area.arr))
    combats[i] = combat
end

function onCastSpell(cid, var)
    -- Trigger each combat object sequentially
    for i, combat in ipairs(combats) do
        if var then
            addEvent(doCombat, i * 750, cid, combat, var)
        end
    end
    return true
end
